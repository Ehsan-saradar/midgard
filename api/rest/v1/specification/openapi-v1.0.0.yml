openapi: 3.0.0
info:
  title: Midgard Public API
  version: 1.0.0-oas3
  contact:
    email: devs@thorchain.org
  description: The Midgard Public API queries THORChain and any chains linked via the Bifr√∂st and prepares information about the network to be readily available for public users. The API parses transaction event data from THORChain and stores them in a time-series database to make time-dependent queries easy. Midgard does not hold critical information. To interact with BEPSwap and Asgardex, users should query THORChain directly.
paths:
  "/v1/swagger.json":
    get:
      operationId: GetSwagger
      summary: Get Swagger
      description: Returns human and machine readable swagger/openapi specification.
      responses:
        "200":
          description: human and machine readable swagger/openapi specification
      tags:
        - Specification
  "/v1/doc":
    get:
      operationId: GetDocs
      summary: Get Documents
      description: Swagger/openapi 3.0 specification generated documents.
      responses:
        "200":
          description: swagger/openapi 3.0 spec generated docs
      tags:
        - Documentation
  "/v1/health":
    get:
      operationId: GetHealth
      summary: Get Health
      description: Returns an object containing the health response of the API.
      responses:
        "200":
          description: health response of the API.
  "/v1/bepswap":
    get:
      operationId: GetBEPSwapData
      summary: Get BEPSwap Data
      description: Returns an object containing global BEPSwap data for all pools and all transactions.
      responses:
        "200":
          $ref: '#/components/responses/BEPSwapResponse'      
  "/v1/assets/{asset}":
    get:
      operationId: GetAssetInfo
      summary: Get Asset Information
      description: Detailed information about a specific asset. Returns enough information to display a unique asset in various user interfaces, including latest price. The logo is sourced from an internal database. 
      parameters:
        - in: path
          name: asset
          description: Unique asset (CHAIN.SYMBOL)
          required: true
          schema:
            type: string
          example: BNB.TOMOB-1E1
      responses:
        "400":
          $ref: '#/components/responses/GeneralErrorResponse'
        "200":
          $ref: '#/components/responses/AssetsDetailedResponse'
  "/v1/assets":
    get:
      operationId: GetAssets
      summary: Get Assets
      description: Returns an array containing all the assets supported on BEPSwap.
      responses:
        "400":
          $ref: '#/components/responses/GeneralErrorResponse'
        "200":
          $ref: '#/components/responses/AssetsResponse'
  "/v1/pools/{asset}":
    get:
      operationId: GetPoolsData
      summary: Get Pools Data
      description: Returns an object containing all the pool data for that asset. All assets on BEPSwap have associated pools. 
      parameters:
        - in: path
          name: asset
          description: Unique asset (CHAIN.SYMBOL)
          required: true
          schema:
            type: string
          example: BNB.TOMOB-1E1
      responses:
        "200":
          $ref: '#/components/responses/PoolsDetailedResponse'

  "/v1/stakers":
    get:
      operationId: GetStakersData
      summary: Get Stakers
      description: Returns an array containing the addresses for all stakers.
      responses:
        "200":
          "$ref": "#/components/responses/StakersResponse"

  "/v1/stakers/{address}":
    get:
      operationId: GetStakersAddressData
      summary: Get Staker Data
      description: Returns an array containing all the pools the staker is staking in.
      parameters:
        - in: path
          name: address
          description: Unique staker address
          required: true
          schema:
            type: string
          example: 'bnb1jxfh2g85q3v0tdq56fnevx6xcxtcnhtsmcu64m'
      responses:
        "200":
          $ref: '#/components/responses/StakersAddressDataResponse'

  "/v1/stakers/{address}/{asset}":
    get:
      operationId: GetStakersAddressAndAssetData
      summary: Get Staker Pool Data
      description: Returns an object containing staking data for the specified staker and pool.
      parameters:
        - in: path
          name: address
          description: Unique staker address
          required: true
          schema:
            type: string
          example: 'bnb1jxfh2g85q3v0tdq56fnevx6xcxtcnhtsmcu64m'
        - in: path
          name: asset
          description: Unique asset
          required: true
          schema:
            type: string
          example: 'BNB.TOMOB-1E1'
      responses:
        "200":
          $ref: '#/components/responses/StakersAssetDataResponse'

  "/v1/stakeTx/{address}":
    get:
      operationId: GetStakerTxForAddress
      summary: Get Staking Transactions
      description: Returns an object containing staking transaction data for the staker specified.
      parameters:
        - in: path
          name: address
          description: Unique staker address
          required: true
          schema:
            type: string
          example: 'bnb1jxfh2g85q3v0tdq56fnevx6xcxtcnhtsmcu64m'
      responses:
        "200":
          $ref: '#/components/responses/StakeTxDataResponse'

  "/v1/swapTx/{address}":
    get:
      operationId: GetSwapTxForAddress
      summary: Get Swapping Transactions
      description: Returns an object containing swapping transaction data for the swapper specified.
      parameters:
        - in: path
          name: address
          description: Unique swapper address
          required: true
          schema:
            type: string
            example: 'bnb1jxfh2g85q3v0tdq56fnevx6xcxtcnhtsmcu64m'
      responses:
        "200":
          $ref: '#/components/responses/SwapTxDataResponse'
components:
  responses:
    SwapTxDataResponse:
      description: array of swapping transaction events
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/SwapTxData'

    StakeTxDataResponse:
      description: array of staking transaction events
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/StakeTxData'
    PoolsDetailedResponse:
      description: object containing pool data for that asset
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PoolDetail'

    BEPSwapResponse:
      description: object containing global BEPSwap data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BEPSwapData'

    StakersAddressDataResponse:
      description: array of all the pools the staker is staking in
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/StakersAddressData'

    StakersResponse:
      description: array of all the stakers
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Stakers'

    StakersAssetDataResponse:
      description: object containing staking data for a specific staker and asset
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/StakersAssetData'

    AssetsDetailedResponse:
      description: object containing detailed asset information
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AssetDetail'

    AssetsResponse:
      description: array of assets
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/asset'

    GeneralErrorResponse:
      description: error message
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

  schemas:
    SwapTxData:
      properties:
        pool:
          $ref: '#/components/schemas/asset'
        type:
          type: string
          enum: [sell, buy, double]
        status:
          type: string
          enum: [success, refund, priceCancelled]
        from:
          type: object
          properties:
            Address:
              type: string
            Coin:
              type: object
              properties:
                asset:
                  $ref: '#/components/schemas/asset'
                amount:
                  type: string
            memo:
              type: string
            priceTarget:
              type: integer
              format: int64
            txID:
              type: string
        to:
          type: object
          properties:
            address:
              type: string
            coin:
              type: object
              properties:
                asset:
                  $ref: '#/components/schemas/asset'
                amount:
                  type: string
            fee:
              type: integer
              description: Fees retained
            slip:
              type: number
              format: double
              description: Swap slip
            gas:
              type: object
              properties:
                asset:
                  $ref: '#/components/schemas/asset'
                amount:
                  type: string
            memo:
              type: string
            txID:
              type: string
            date:
              type: string
              format: 'date-time'
            height:
              type: integer
              format: int64
    StakeTxData:
      properties:
        pool:
          $ref: '#/components/schemas/asset'
        type:
          type: string
          enum: [stake, withdraw]
        status:
          type: string
          enum: [success, refund]
        send:
          type: object
          properties:
            Coins:
              type: array
              items:
                type: object
                properties:
                  asset:
                    $ref: '#/components/schemas/asset'
                  amount:
                    type: integer
                    format: int64
            memo:
              type: string
            txID:
              type: string
        receive:
          type: object
          properties:
            coins:
              type: array
              items:
                type: object
                properties:
                  asset:
                    $ref: '#/components/schemas/asset'
                  amount:
                    type: integer
                    format: int64
            memo:
              type: string
            txID:
              type: string
            gas:
              type: object
              properties:
                asset:
                  $ref: '#/components/schemas/asset'
                amount:
                  type: integer
                  format: int64
        stake:
          type: object
          properties:
            stakeUnitsAdded:
              type: integer
              format: int64
              description: Stake units added
        withdraw:
          type: object
          properties:
            stakeUnitsSubtracted:
              type: integer
              format: int64
              description: Stake units subtracted (reduces pool ownership)
            withdrawBasisPoints:
              type: integer
              format: int64
              description: Withdraw basis points (10000 = 100%)
            asymmetry:
              type: number
              format: double
              description: Asymmetry (-1.0 (Rune-biased) 0 (default) 1.0 (asset-biased))
        date:
          type: string
          format: 'date-time'
        height:
          type: integer
          format: int64
          description: THORChain blockheight

    BEPSwapData:
      type: object
      properties:
        dailyActiveUsers:
          type: integer
          format: int64
          description: Daily active users (unique addresses interacting)
        monthlyActiveUsers:
          type: integer
          format: int64
          description: Monthly active users
        totalUsers:
          type: integer
          format: int64
          description: Total unique swappers & stakers
        dailyTx:
          type: integer
          format: int64
          description: Daily transactions
        monthlyTx:
          type: integer
          format: int64
          description: Monthly transactions
        totalTx:
          type: integer
          format: int64
          description: Total transactions
        totalVolume24hr:
          type: integer
          format: int64
          description: Total (in RUNE Value) of all assets swapped in 24hrs
        totalVolume:
          type: integer
          format: int64
          description: Total (in RUNE Value) of all assets swapped since start.
        totalStaked:
          type: integer
          format: int64
          description: Total staked (in RUNE Value).
        totalDepth:
          type: integer
          format: int64
          description: Total RUNE balances
        totalEarned:
          type: integer
          format: int64
          description: Total earned (in RUNE Value).
        poolCount:
          type: integer
          format: int64
          description: Number of active pools
        totalAssetBuys:
          type: integer
          format: int64
          description: Total buying transactions
        totalAssetSells:
          type: integer
          format: int64
          description: Total selling transactions
        totalStakeTx:
          type: integer
          format: int64
          description: Total staking transactions
        totalWithdrawTx:
          type: integer
          format: int64
          description: Total withdrawing transactions

    StakersAddressData:
      type: object
      properties:
        stakeArray:
          type: array
          items:
            $ref: '#/components/schemas/asset'
        totalStaked:
          type: integer
          format: int64
          description: Total staked (in RUNE) across all pools.
        totalEarned:
          type: integer
          format: int64
          description: Total value of earnings (in RUNE) across all pools.
        totalROI:
          type: integer
          format: int64
          description: Average of all pool ROIs.

    StakersAssetData:
      type: object
      properties:
        asset:
          $ref: '#/components/schemas/asset'
        stakeUnits:
          type: integer
          format: int64
          description: Represents ownership of a pool.
        runeStaked:
          type: integer
          format: int64
          description: Amount of RUNE staked.
        assetStaked:
          type: integer
          format: int64
          description: Amount of Assets staked.
        poolStaked:
          type: integer
          format: int64
          description: RUNE value staked.
        runeEarned:
          type: integer
          format: int64
          description: Value of RUNE earned from the pool.
        assetEarned:
          type: integer
          format: int64
          description: Value of Assets earned from the pool. 
        poolEarned:
          type: integer
          format: int64
          description: Total value of earnings (in RUNE). 
        runeROI:
          type: number
          format: double
          description: ROI of the Rune side.
        assetROI:
          type: number
          format: double
          description: ROI of the Asset side
        poolROI:
          type: number
          format: double
          description: Average ROI (in RUNE) of both sides
        dateFirstStaked:
          type: string
          format: 'date-time'

    Stakers:
      type: string
      description: Staker address
      example: tbnb1fj2lqj8dvr5pumfchc7ntlfqd2v6zdxqwjewf5

    PoolDetail:
      type: object
      properties:
        asset:
          $ref: '#/components/schemas/asset'
        statue:
          type: string
          enum: [bootstrapped, enabled, disabled]
        price:
          type: number
          format: double
          description: Price of Asset (in RUNE).
        assetStakedTotal:
          type: integer
          format: int64
          description: Total Asset staked
        runeStakedTotal:
          type: integer
          format: int64
          description: Total RUNE staked
        poolStakedTotal:
          type: integer
          format: int64
          description: Rune value staked Total
        assetDepth:
          type: integer
          format: int64
          description: Total current Asset balance
        runeDepth:
          type: integer
          format: int64
          description: Total current Rune balance
        poolDepth:
          type: integer
          format: int64
          description: Total depth of both sides (in RUNE)
        poolUnits:
          type: integer
          format: int64
          description: Total pool units outstanding
        sellVolume:
          type: integer
          format: int64
          description: Total Asset sell volume (ASSET>RUNE) (in RUNE).
        buyVolume:
          type: integer
          format: int64
          description: Total Asset buy volume (RUNE->ASSET) (in Asset)
        poolVolume:
          type: integer
          format: int64
          description: Two-way volume of all-time (in RUNE)
        poolVolume24hr:
          type: integer
          format: int64
          description: Two-way volume in 24hrs (in RUNE)
        sellTxAverage:
          type: integer
          format: int64
          description: Average Asset sell transaction size (ASSET>RUNE) (in RUNE)
        buyTxAverage:
          type: integer
          format: int64
          description: Average Asset buy transaction size for (RUNE->ASSET) (in ASSET)
        poolTxAverage:
          type: integer
          format: int64
          description: Average pool transaction
        sellSlipAverage:
          type: integer
          format: int64
          description: Average trade slip for ASSET->RUNE in %
        buySlipAverage:
          type: integer
          format: int64
          description: Average trade slip for RUNE->ASSET in %
        poolSlipAverage:
          type: integer
          format: int64
          description: Average pool slip
        sellFeeAverage:
          type: integer
          format: int64
          description: Average buy Asset fee size for ASSET->RUNE (in RUNE)
        buyFeeAverage:
          type: integer
          format: int64
          description: Average sell Asset fee size for RUNE->ASSET (in ASSET)
        poolFeeAverage:
          type: integer
          format: int64
          description: Average pool fee
        sellFeesTotal:
          type: integer
          format: int64
          description: Total fees (in RUNE)
        buyFeesTotal:
          type: integer
          format: int64
          description: Total fees (in Asset)
        poolFeesTotal:
          type: integer
          format: int64
          description: Total fees
        sellAssetCount:
          type: integer
          format: int64
          description: Number of ASSET->RUNE transactions
        buyAssetCount:
          type: integer
          format: int64
          description: Number of RUNE->ASSET transactions
        swappingTxCount:
          type: integer
          format: int64
          description: Number of swapping transactions in the pool (buys and sells)
        swappersCount:
          type: integer
          format: int64
          description: Number of unique swappers interacting with pool
        stakeTxCount:
          type: integer
          format: int64
          description: Number of stake transactions
        withdrawTxCount:
          type: integer
          format: int64
          description: Number of withdraw transactions
        stakingTxCount:
          type: integer
          format: int64
          description: Number of stake & withdraw transactions
        stakersCount:
          type: integer
          format: int64
          description: Number of unique stakers
        assetROI:
          type: number
          format: double
          description: Asset return on investment
        runeROI:
          type: number
          format: double
          description: RUNE return on investment
        poolROI:
          type: number
          format: double
          description: Pool ROI (average of RUNE and Asset ROI)
        poolROI12:
          type: number
          format: double
          description: Pool ROI over 12 months

    AssetDetail:
      type: object
      properties:
        asset:
          $ref: '#/components/schemas/asset'
        name:
          type: string
        dateCreated:
          type: string
          format: date
        logo:
          type: string
        priceRune:
          type: number
          format: double
        priceUSD:
          type: number
          format: double

    Error:
      required:
        - "error"
      type: object
      properties:
        error:
          type: string

    asset:
      type: object
      properties:
        chain:
          type: string
        symbol:
          type: string
        ticker:
          type: string
servers:
  - url: http://127.0.0.1:8080
  - url: https://127.0.0.1:8080
